<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextView</title>
    <link rel="stylesheet" href="assets/css/dashboard.css">
    <link rel="shortcut icon" href="assets/imgs/icon.png" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script src="assets/js/dashboard.js"></script>

</head>

<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <ul id="menu">
                <li><img id="logo" src="assets/imgs/Logo.png" alt=""></li>
                <li>
                    <a href="dashboard.html">
                        <img src="assets/imgs/002-google-analytics.png" alt="Análises">
                        <p>Dashboard</p>
                    </a>
                </li>
                <li>
                    <a href="pesquisa.html">
                        <img src="assets/imgs/ion--search-outline (2).png" alt="Pesquisa">
                        <p>Pesquisar conteúdo</p>
                    </a>
                </li>
                <li>
                    <a href="favoritos.html">
                        <img src="assets/imgs/ion--star-outline.png" alt="Favoritos">
                        <p>Favoritos</p>
                    </a>
                </li>
                <li>
                    <a href="index.html">
                        <img src="assets/imgs/001-sair.png" alt="Sair">
                        <p>Logout</p>
                    </a>
                </li>
            </ul>
        </aside>

        <main class="dashboard-main">
            <div class="dashboard-row columns">
                <div class="container-perfil">

                    <p>Bem Vindo!</p>
                    <button onclick="exibirPerfil()"><img src="assets/imgs/perfil-azul.png" alt=""></button>

                </div>

                <div class="card-perfil" id="cardPerfil">

                    <div class="container-card-info">
                        <h2>Informações de perfil</h2>

                        <hr>

                        <div class="info-item" id="empresa-item">
                            <div>
                                <label>Nome da empresa</label>
                                <input type="text" id="empresa" value="..." disabled>
                            </div>
                            <span class="edit-icon" onclick="habilitarEdit('empresa')"><img class="icon-pencil"
                                    src="assets/imgs/ferramenta-lapis.png" alt=""></span>
                        </div>

                        <div class="info-item" id="cnpj-item">
                            <div>
                                <label>CNPJ</label>
                                <input type="text" id="cnpj" value="..." disabled>
                            </div>
                            <span class="edit-icon" onclick="habilitarEdit('cnpj')"><img class="icon-pencil"
                                    src="assets/imgs/ferramenta-lapis.png" alt=""></span>
                        </div>

                        <div class="info-item" id="email-item">
                            <div>
                                <label>E-mail</label>
                                <input type="text" id="email" value="..." disabled>
                            </div>
                            <span class="edit-icon" onclick="habilitarEdit('email')"><img class="icon-pencil"
                                    src="assets/imgs/ferramenta-lapis.png" alt=""></span>
                        </div>

                        <div class="info-item" id="telefone-item">
                            <div>
                                <label>Telefone</label>
                                <input type="text" id="telefone" value="..." disabled>
                            </div>
                            <span class="edit-icon" onclick="habilitarEdit('telefone')"><img class="icon-pencil"
                                    src="assets/imgs/ferramenta-lapis.png" alt=""></span>
                        </div>

                        <button class="confirm-btn" id="confirmBtn" onclick="confirmarEdit()"
                            disabled>Confirmar</button>
                    </div>

                </div>

                <div class="column">
                    <div class="card-row">
                        <div class="dashboard-card card-wide">
                            <h2>Filmes de melhor avaliação</h2>
                            <span class="card-date">Dados do dia 05/05/2045</span>
                            <div id="chart-filmes"></div>
                        </div>

                        <div class="infos-column">
                            <div class="dashboard-info">
                                <div class="info-item">
                                    <div class="info-img">
                                        <img src="assets/imgs/ion--person-outline (1).png" alt="Ator">
                                    </div>
                                    <div class="info-conteudo">
                                        <span class="info-label">Ator do momento</span>
                                        <span class="info-value">Bob Odenkirk</span>
                                    </div>
                                </div>

                                <div class="info-item">
                                    <div class="info-img">
                                        <img src="assets/imgs/ion--eyedrop-outline.png" alt="Ator">
                                    </div>
                                    <div class="info-conteudo">
                                        <span class="info-label">Diretor do momento</span>
                                        <span class="info-value">Kiyoshi Kurosawa</span>
                                    </div>
                                </div>

                                <div class="info-item">
                                    <div class="info-img">
                                        <img src="assets/imgs/ion--play-outline.png" alt="Ator">
                                    </div>
                                    <div class="info-conteudo">
                                        <span class="info-label">Tipo de conteúdo</span>
                                        <span class="info-value">Filme</span>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>

                <div class="column">
                    <div class="card-row">
                        <div class="dashboard-card card-wide">
                            <h2>Séries de melhor avaliação</h2>
                            <span class="card-date">Dados do dia 05/05/2045</span>
                            <div id="chart-series"></div>
                        </div>

                        <div class="dashboard-card dashboard-card-pie card-narrow">
                            <h2>Gêneros</h2>
                            <span class="card-date">Dados do dia 05/05/2045</span>
                            <div id="chart-generos"></div>
                            <div class="pie-legend">
                                <span><span class="dot" style="background:#0FBBFF"></span>Comédia 8%</span>
                                <span><span class="dot" style="background:#0033FF"></span>Ficção 50%</span>
                                <span><span class="dot" style="background:#05009A"></span>Ação 25%</span>
                                <span><span class="dot" style="background:#00033D"></span>Romance 17%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

</body>
</html>

<script>

    const paginaAtual = window.location.pathname.split("/").pop();

    const links = document.querySelectorAll("#menu a");

    links.forEach(link => {
        const linkHref = link.getAttribute("href");

        if (paginaAtual === linkHref) {
            link.classList.add("ativo");
        }

        link.addEventListener("click", () => {
            links.forEach(l => l.classList.remove("ativo"));
            link.classList.add("ativo");
        });
    });

    let editDaVez = null;

    function habilitarEdit(id) {

        if (editDaVez && editDaVez !== id) {
            document.getElementById(editDaVez).disabled = true;
            document.getElementById(editDaVez + '-item').classList.remove('active');
        }

        const input = document.getElementById(id);
        const item = document.getElementById(id + '-item');
        input.disabled = false;
        input.focus();
        item.classList.add('active');

        document.getElementById('confirmBtn').disabled = false;

        editDaVez = id;
    }

    function confirmarEdit() {
        if (!editDaVez) return;

        const input = document.getElementById(editDaVez);
        const item = document.getElementById(editDaVez + '-item');
        input.disabled = true;
        item.classList.remove('active');

        document.getElementById('confirmBtn').disabled = true;

        editDaVez = null;
    }

    function exibirPerfil() {
        const card = document.getElementById("cardPerfil");
        card.classList.toggle("ativo");
    }

    var chartFilmes = echarts.init(document.getElementById('chart-filmes'));
    chartFilmes.setOption({
        legend: {
            top: '8%',
            left: 'center',
            orient: 'horizontal',
            textStyle: { color: '#05009A' }
        },
        title: { show: false },
        xAxis: {
            type: 'category',
            data: ['F1', 'F2', 'F3', 'F4', 'F5'],
            name: 'Filme',
            nameLocation: 'middle',
            nameGap: 22,
            nameTextStyle: { color: '#05009A', fontSize: 10 }
        },
        yAxis: {
            type: 'value',
            min: 0,
            max: 5,
            name: 'Avaliação',
            nameLocation: 'middle',
            nameGap: 40,
            nameTextStyle: { color: '#05009A', fontSize: 10 },
            nameRotate: 90
        },
        series: [{
            name: 'Avaliação',
            type: 'bar',
            data: [3, 5, 4, 4, 4],
            barWidth: 34,
            itemStyle: { color: '#05009A', borderRadius: [1, 1, 0, 0] }
        }],
        grid: { left: 50, right: 10, top: '28%', bottom: 30 },
        tooltip: {}
    });

    var chartSeries = echarts.init(document.getElementById('chart-series'));
    chartSeries.setOption({
        legend: {
            top: '8%',
            left: 'center',
            orient: 'horizontal',
            textStyle: { color: '#05009A' }
        },
        xAxis: {
            type: 'category',
            data: ['S1', 'S2', 'S3', 'S4', 'S5'],
            name: 'Série',
            nameLocation: 'middle',
            nameGap: 22,
            nameTextStyle: { color: '#05009A', fontSize: 10 }
        },
        yAxis: {
            type: 'value',
            min: 0,
            max: 5,
            name: 'Avaliação',
            nameLocation: 'middle',
            nameGap: 40,
            nameTextStyle: { color: '#05009A', fontSize: 10 },
            nameRotate: 90
        },
        series: [{
            name: 'Avaliação',
            type: 'bar',
            data: [4, 5, 4, 5, 3],
            barWidth: 34,
            itemStyle: { color: '#05009A', borderRadius: [1, 1, 0, 0] }
        }],
        grid: { left: 50, right: 10, top: '28%', bottom: 30 },
        tooltip: {}
    });

    var chartGeneros = echarts.init(document.getElementById('chart-generos'));
    chartGeneros.setOption({
        tooltip: { trigger: 'item' },
        series: [{
            type: 'pie',
            radius: '100%',
            data: [
                { value: 8, name: 'Comédia', itemStyle: { color: '#0FBBFF' } },
                { value: 50, name: 'Ficção', itemStyle: { color: '#0033FF' } },
                { value: 25, name: 'Ação', itemStyle: { color: '#05009A' } },
                { value: 17, name: 'Romance', itemStyle: { color: '#00033D' } }
            ],
            label: { show: false }
        }]
    });

</script>